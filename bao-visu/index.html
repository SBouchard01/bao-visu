<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BAO Visualization - Step 1</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="ui-container">
        <!-- Settings Panel (Collapsible) -->
        <div id="settings-panel" class="glass-panel collapsed">
            <div class="panel-header">
                <div class="logo-title">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#4cc9f0" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <circle cx="12" cy="12" r="4"></circle>
                        <path d="M12 2a10 10 0 0 1 10 10"></path>
                    </svg>
                    <h3>BAO Visualization</h3>
                </div>
                <button id="close-settings-btn" class="icon-btn" title="Close Settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 6L6 18M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <div class="panel-content">
                <!-- Redshift Box (Prominent) -->
                <div class="control-box highlight-box">
                    <div class="box-header">
                        Redshift Evolution
                        <span id="z-val" class="value-display">5.00</span>
                    </div>
                    <div class="full-width-slider-container" style="margin-bottom: 5px;">
                        <!-- RTL Slider: Min(0)=Right, Max(5)=Left -->
                        <input type="range" id="z-slider" min="0" max="5" step="0.01" value="5" class="slider-rtl">
                    </div>
                    <div class="button-row">
                        <button id="play-btn" class="icon-text-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
                            Play
                        </button>
                        <button id="reset-btn" class="icon-text-btn">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
                            Reset
                        </button>
                    </div>
                </div>

                <!-- Layers Box -->
                <div class="control-box">
                    <div class="box-header">Layers</div>
                    <div class="layer-checkbox-container">
                        <label class="layer-checkbox-item">
                            <div class="layer-label-content">
                                <!-- Density: Layer Group Icon -->
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z" fill="currentColor" stroke="none"/>
                                    <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                                </svg>
                                <span>Density Field</span>
                            </div>
                            <input type="checkbox" id="layer-density-toggle" checked>
                            <span class="checkmark">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </span>
                        </label>
                        
                        <label class="layer-checkbox-item">
                            <div class="layer-label-content">
                                <!-- Galaxies: Solar System Icon (FontAwesome Style) -->
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <defs>
                                        <mask id="solar-mask-1">
                                            <rect width="24" height="24" fill="white"/>
                                            <circle cx="18" cy="14" r="2.2" fill="black"/>
                                            <circle cx="6" cy="17" r="2.5" fill="black"/>
                                        </mask>
                                    </defs>
                                    <!-- Central Sun -->
                                    <circle cx="12" cy="12" r="2.5" fill="currentColor" stroke="none"/>
                                    
                                    <g mask="url(#solar-mask-1)">
                                        <!-- Inner Orbit -->
                                        <ellipse cx="12" cy="12" rx="7" ry="3.5" transform="rotate(-20 12 12)"/>
                                        <!-- Outer Orbit -->
                                        <ellipse cx="12" cy="12" rx="10" ry="5" transform="rotate(10 12 12)"/>
                                    </g>
                                    
                                    <!-- Planet on Inner Orbit -->
                                    <circle cx="18" cy="14" r="1.2" fill="currentColor" stroke="none"/>
                                    
                                    <!-- Planet on Outer Orbit -->
                                    <circle cx="6" cy="17" r="1.5" fill="currentColor" stroke="none"/>
                                </svg>
                                <span>Galaxies</span>
                            </div>
                            <input type="checkbox" id="layer-galaxies-toggle" checked>
                            <span class="checkmark">
                                <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3">
                                    <polyline points="20 6 9 17 4 12"></polyline>
                                </svg>
                            </span>
                        </label>
                    </div>
                </div>

                <!-- Simulation Box -->
                <div class="control-box">
                    <div class="box-header">Simulation</div>
                    
                    <!-- Reference Frame Toggle -->
                    <div class="toggle-group-container">
                        <label class="toggle-group-label">Reference Frame</label>
                        <div class="toggle-group">
                            <button id="frame-physical-btn" class="toggle-btn active">Physical</button>
                            <button id="frame-comoving-btn" class="toggle-btn">Comoving</button>
                        </div>
                    </div>

                    <div class="full-width-slider-container">
                        <div class="slider-label-row">
                            <label>Galaxy Number</label>
                            <span id="galaxy-number-val" class="value-display">2000</span>
                        </div>
                        <input type="range" id="galaxy-density-slider" min="0" max="3" step="0.1" value="1.0">
                    </div>

                    <div class="full-width-slider-container">
                        <div class="slider-label-row">
                            <label>Gravity Strength</label>
                            <span id="gravity-val" class="value-display">0.7</span>
                        </div>
                        <input type="range" id="gravity-slider" min="0" max="2" step="0.1" value="0.7">
                    </div>

                    <div class="full-width-slider-container">
                        <div class="slider-label-row">
                            <label>Ring Count</label>
                            <span id="bao-val" class="value-display">1</span>
                        </div>
                        <input type="range" id="bao-slider" min="1" max="100" value="1">
                    </div>

                    <button id="shuffle-btn" class="secondary-btn" style="margin-top: 5px;">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="margin-right: 5px;">
                            <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/>
                        </svg>
                        Shuffle Positions
                    </button>
                </div>

                <!-- Cosmology Box -->
                <div class="control-box cosmology-box">
                    <div class="box-header">
                        <span>Cosmology</span>
                        <div class="toggle-wrapper">
                            <label for="flat-toggle" class="toggle-label">Flat</label>
                            <label class="switch">
                                <input type="checkbox" id="flat-toggle" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="compact-slider-row">
                        <label class="math-label">Ω<sub>m</sub></label>
                        <input type="range" id="omegam-slider" min="0" max="1" step="0.01" value="0.3">
                        <span id="omegam-val" class="value-display">0.30</span>
                    </div>

                    <div class="compact-slider-row">
                        <label class="math-label">Ω<sub>Λ</sub></label>
                        <input type="range" id="omegal-slider" min="0" max="1" step="0.01" value="0.7">
                        <span id="omegal-val" class="value-display">0.70</span>
                    </div>
                </div>

                <div class="disclaimer-text">
                    Note: This visualization is for educational purposes and simplifies complex cosmological phenomena. It is not a physically rigorous simulation.
                </div>
            </div>
        </div>

        <!-- Sidebar (Always Visible) -->
        <div id="sidebar" class="glass-panel">
            <div id="sidebar-logo-btn" class="sidebar-logo" title="Toggle Settings">
                <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="#4cc9f0" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <circle cx="12" cy="12" r="4"></circle>
                    <path d="M12 2a10 10 0 0 1 10 10"></path>
                </svg>
            </div>

            <div class="divider-h"></div>
            
            <button id="sidebar-play-btn" class="icon-btn" title="Play/Pause">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M8 5v14l11-7z"/></svg>
            </button>

            <button id="sidebar-reset-btn" class="icon-btn" title="Reset">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            </button>

            <div class="spacer-v"></div>

            <button id="sidebar-density-btn" class="icon-btn active" title="Toggle Density Field">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2L2 7l10 5 10-5-10-5z" fill="currentColor" stroke="none"/>
                    <path d="M2 17l10 5 10-5M2 12l10 5 10-5"/>
                </svg>
            </button>

            <button id="sidebar-galaxies-btn" class="icon-btn active" title="Toggle Galaxies">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                    <defs>
                        <mask id="solar-mask-2">
                            <rect width="24" height="24" fill="white"/>
                            <circle cx="18" cy="14" r="2.2" fill="black"/>
                            <circle cx="6" cy="17" r="2.5" fill="black"/>
                        </mask>
                    </defs>
                    <!-- Central Sun -->
                    <circle cx="12" cy="12" r="2.5" fill="currentColor" stroke="none"/>
                    
                    <g mask="url(#solar-mask-2)">
                        <!-- Inner Orbit -->
                        <ellipse cx="12" cy="12" rx="7" ry="3.5" transform="rotate(-20 12 12)"/>
                        <!-- Outer Orbit -->
                        <ellipse cx="12" cy="12" rx="10" ry="5" transform="rotate(10 12 12)"/>
                    </g>
                    
                    <!-- Planet on Inner Orbit -->
                    <circle cx="18" cy="14" r="1.2" fill="currentColor" stroke="none"/>
                    
                    <!-- Planet on Outer Orbit -->
                    <circle cx="6" cy="17" r="1.5" fill="currentColor" stroke="none"/>
                </svg>
            </button>
        </div>
    </div>

    <canvas id="sim-canvas"></canvas>

    <script src="script.js"></script>
</body>
</html>